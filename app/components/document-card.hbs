{{#if (not this.loading)}}
  {{#if (eq this.document.documentVersions.length 1)}}
    <Kaleidos::DocumentCard
      @name={{this.selectedVersion.name}}
      @locked={{this.selectedVersion.confidential}}
      @time={{this.selectedVersion.created}}
      @accessLevel={{this.selectedVersion.accessLevel}}
      @downloadLink={{this.selectedVersion.downloadLink}}
      @onToggleLock={{fn this.toggleAccessLevel this.selectedVersion}}
      @onDeleteDocument={{fn this.deleteDocument document}}
      @onDeleteVersion={{fn this.deleteVersion this.selectedVersion}}
      @onUploadVersion={{action (fn (mut this.addingVersion)) true}}
      @accessLevelOptions={{this.accessLevelOptions}}
      @editable={{@editable}}
    />
  {{else if (gt this.document.documentVersions.length 1)}}
    <Kaleidos::DocumentCard
      @name={{this.selectedVersion.name}}
      @locked={{this.selectedVersion.confidential}}
      @time={{this.selectedVersion.created}}
      @accessLevel={{this.selectedVersion.accessLevel}}
      @downloadLink={{this.selectedVersion.downloadLink}}
      @onToggleLock={{fn this.toggleAccessLevel this.selectedVersion}}
      @onDeleteDocument={{fn this.deleteDocument document}}
      @onDeleteVersion={{fn this.deleteVersion this.selectedVersion}}
      @onUploadVersion={{action (fn (mut this.addingVersion)) true}}
      @accessLevelOptions={{this.accessLevelOptions}}
      @editable={{@editable}}
      as |VersionCard|>
      {{#each this.document.sortedDocumentVersions as |version|}}
        <VersionCard
          @name={{version.name}}
          @locked={{version.confidential}}
          @time={{version.file.created}}
          @accessLevel={{version.accessLevel}}
          @downloadLink={{version.downloadLink}}
          @onToggleLock={{fn this.toggleAccessLevel version}}
          @selected={{eq version this.selectedVersion}}
          @onDeleteVersion={{fn this.deleteVersion version}}
          @accessLevelOptions={{this.accessLevelOptions}}
          @editable={{@editable}}
        />
      {{/each}}
    </Kaleidos::DocumentCard>
  {{/if}}
{{/if}}

{{#if this.addingVersion}}
  <FileUploadModal
    @didUpload={{this.addVersion}}
  />
{{/if}}
{{#if this.deletingDocument}}
  <Kaleidos::ConfirmationModal
    @title="Document verwijderen"
    @loading={{this.isLoading}}
    @onCancel={{action (mut deletingDocument false)}}
    @onClose={{action (mut deletingDocument false)}}
    @onConfirm={{action "save"}}
    @buttonStyle="error"
    @buttonIcon="bin"
    @buttonText="verwijderen"
    >
    Weet u zeker dat u dit document wil verwijderen?
    <strong>Elke versie van dit document zal verwijderd worden!</strong>
  </Kaleidos::ConfirmationModal>
{{/if}}
{{#if this.deletingVersion}}
  <Kaleidos::ConfirmationModal
    @title="Document verwijderen"
    @loading={{this.isLoading}}
    @onCancel={{action (mut deletingVersion false)}}
    @onClose={{action (mut deletingVersion false)}}
    @onConfirm={{action "save"}}
    @buttonStyle="error"
    @buttonIcon="bin"
    @buttonText="verwijderen"
    >
    Weet u zeker dat u deze versie wil verwijderen?
  </Kaleidos::ConfirmationModal>
{{/if}}